# 🤖 AI Workflow Platform

## 🚀 概述

AI Workflow Platform 是一个现代化的智能工作流设计和执行平台，采用最新的OpenAI风格界面设计，为用户提供直观、优雅的AI工作流管理体验。

## ✨ 新的UI特性

### OpenAI风格设计
- **现代化界面**: 采用简洁、现代的设计语言
- **优雅的颜色方案**: 使用灰色调为主的专业配色
- **精致的图标**: 使用Heroicons提供的现代SVG图标
- **流畅的动画**: 添加了微妙的过渡动画和悬停效果
- **中文界面**: 完全本地化的中文用户界面

### 视觉改进
- **卡片式设计**: 工作流以现代卡片形式展示
- **悬停效果**: 丰富的交互反馈和视觉提示
- **状态标识**: 清晰的工作流状态显示
- **响应式布局**: 适配不同屏幕尺寸的网格布局
- **优化的加载状态**: 现代化的加载动画

### 用户体验提升
- **直观的导航**: 简洁的顶部导航栏
- **快速操作**: 卡片悬停时显示操作按钮
- **优雅的弹窗**: 现代化的模态对话框设计
- **清晰的层次**: 良好的信息架构和视觉层次

## 🆕 最新功能：变量面板

### 实时变量管理
- **侧边变量列表**: 在工作流编辑器右侧显示所有定义的变量
- **自动提取**: 节点配置完成后自动提取新定义的变量
- **实时更新**: 变量列表实时反映工作流中的变量变化
- **分组显示**: 按节点分组显示变量，便于管理

### 智能变量识别
- **开始节点**: 自动提取初始变量JSON中的所有变量名
- **AI智能体**: 识别输出变量配置
- **类型标识**: 区分初始变量和输出变量
- **节点关联**: 显示每个变量的来源节点

### 优雅的界面设计
- **OpenAI风格**: 与整体界面保持一致的现代化设计
- **图标系统**: 不同节点类型使用专门的SVG图标
- **颜色编码**: 使用不同颜色标识变量来源
- **响应式面板**: 可收缩的侧边面板，不影响主编辑区域

## 🛠️ 技术栈

### 前端
- React 18 + TypeScript
- Tailwind CSS
- React Flow (工作流可视化)
- Heroicons (图标库)

### 后端
- Python + Flask
- SQLite 数据库
- RESTful API

## 📁 项目结构

```
ai_workflow/
├── frontend/                 # React前端应用
│   ├── src/
│   │   ├── components/      # UI组件
│   │   │   ├── WorkflowManager/    # 工作流管理器
│   │   │   ├── WorkflowEditor/     # 工作流编辑器
│   │   │   ├── VariablePanel/      # 变量面板 🆕
│   │   │   ├── ExecutionView/      # 执行视图
│   │   │   └── NodeTypes/          # 节点类型组件
│   │   ├── services/        # API服务
│   │   ├── types/          # TypeScript类型定义
│   │   ├── utils/          # 工具函数
│   │   │   └── variableExtractor.ts # 变量提取器 🆕
│   │   └── App.tsx         # 主应用组件
│   └── package.json
├── backend/                  # Flask后端API
│   ├── app.py              # 主应用文件
│   ├── models.py           # 数据模型
│   └── requirements.txt
└── README.md
```

## 🚀 快速开始

### 环境要求
- Node.js 16+
- Python 3.8+

### 安装和运行

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd ai_workflow
   ```

2. **启动后端服务**
   ```bash
   cd backend
   pip install -r requirements.txt
   python app.py
   ```

3. **启动前端应用**
   ```bash
   cd frontend
   npm install
   npm start
   ```

4. **访问应用**
   打开浏览器访问 `http://localhost:3000`

## 🎯 主要功能

### 工作流管理
- ✅ 创建和管理AI工作流
- ✅ 工作流状态跟踪（活跃/草稿/归档）
- ✅ 搜索和筛选功能
- ✅ 工作流描述和元数据管理

### 可视化编辑
- ✅ 拖拽式工作流设计
- ✅ 多种节点类型支持
- ✅ 节点配置面板
- ✅ 实时预览和验证
- 🆕 **变量面板**: 实时显示和管理工作流变量

### 执行监控
- ✅ 工作流执行状态监控
- ✅ 实时日志查看
- ✅ 执行历史记录
- ✅ 错误诊断和调试

### 变量管理 🆕
- ✅ 实时变量提取和显示
- ✅ 按节点分组的变量列表
- ✅ 变量来源标识（初始/输出）
- ✅ 智能变量解析
- ✅ 优雅的侧边面板界面

## 🎨 设计原则

本项目的UI设计遵循以下原则：

1. **简洁性**: 避免不必要的视觉噪音，专注于核心功能
2. **一致性**: 统一的设计语言和交互模式
3. **可访问性**: 良好的对比度和键盘导航支持
4. **响应性**: 适配各种设备和屏幕尺寸
5. **现代性**: 采用当前最佳的UI设计实践

## 🔧 开发说明

### 自定义样式
项目使用Tailwind CSS作为主要样式框架，并在 `src/index.css` 中添加了自定义样式：

- `.line-clamp-2` 和 `.line-clamp-3`: 文本截断样式
- 自定义滚动条样式
- 优化的焦点环样式

### 组件设计
- 所有组件都采用函数式组件和React Hooks
- 使用TypeScript确保类型安全
- 遵循单一职责原则，保持组件简洁

### API集成
- 使用统一的API客户端进行后端通信
- 错误处理和加载状态管理
- 支持异步操作和状态更新

### 变量管理系统 🆕
- 智能变量提取算法
- 实时变量列表更新
- 性能优化的变量计算

## 📖 使用指南

### 变量面板使用方法

1. **打开变量面板**
   - 在工作流编辑器顶部工具栏点击"变量列表"按钮
   - 面板会从右侧滑出，显示当前工作流中的所有变量

2. **查看变量信息**
   - 变量按定义它们的节点分组显示
   - 每个变量显示名称、来源类型（初始/输出）
   - 节点图标帮助快速识别变量来源

3. **实时更新**
   - 修改节点配置后，变量列表会自动更新
   - 支持开始节点的初始变量和AI智能体的输出变量

详细使用说明请参考：[变量面板功能说明](VARIABLE_PANEL_FEATURE.md)

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

---

🎉 **享受使用新的OpenAI风格界面和变量管理功能！**